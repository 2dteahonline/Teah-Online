<!DOCTYPE html>
<html>
<head>
  <!-- Prevent browser from caching this HTML file -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <!-- BUILD: v24 — queue approach from side, order waits for customer -->
  <title>Graal-Style PvP Arena</title>
  <style>
    * { margin: 0; padding: 0; }
    body { background: #000; overflow: hidden; }
    canvas { display: block; image-rendering: pixelated; image-rendering: crisp-edges; }
  </style>
</head>
<body>
  <canvas id="game"></canvas>
  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d", { alpha: false });

    const BASE_W = 1920, BASE_H = 1080;
    let scale = 1;

    function resize() {
      scale = Math.min(window.innerWidth / BASE_W, window.innerHeight / BASE_H);
      const dpr = window.devicePixelRatio || 1;
      canvas.width = Math.round(BASE_W * dpr);
      canvas.height = Math.round(BASE_H * dpr);
      canvas.style.width = (BASE_W * scale) + "px";
      canvas.style.height = (BASE_H * scale) + "px";
      canvas.style.marginLeft = ((window.innerWidth - BASE_W * scale) / 2) + "px";
      canvas.style.marginTop = ((window.innerHeight - BASE_H * scale) / 2) + "px";
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      // Crisp pixel rendering
      ctx.imageSmoothingEnabled = false;
      ctx.textRendering = "geometricPrecision";
    }
    resize();
    window.addEventListener("resize", resize);

    // Cache-bust version — increment to force browser to reload all JS
    const _v = 10;
  </script>

  <!-- Phase A: Shared data -->
  <script src="js/shared/levelData.js?v=24"></script>
  <script src="js/shared/mobTypes.js?v=24"></script>
  <script src="js/shared/floorConfig.js?v=24"></script>
  <script src="js/shared/itemData.js?v=24"></script>
  <script src="js/shared/oreData.js?v=24"></script>
  <script src="js/shared/cookingData.js?v=24"></script>
  <script src="js/shared/fishingData.js?v=24"></script>
  <script src="js/shared/farmingData.js?v=24"></script>
  <script src="js/shared/armorVisuals.js?v=24"></script>
  <script src="js/shared/dungeonRegistry.js?v=24"></script>
  <script src="js/shared/gunData.js?v=24"></script>

  <!-- Phase B: Authority systems -->
  <script src="js/authority/eventBus.js?v=24"></script>
  <script src="js/authority/gameState.js?v=24"></script>
  <script src="js/authority/combatSystem.js?v=24"></script>
  <script src="js/authority/attackShapes.js?v=24"></script>
  <script src="js/authority/telegraphSystem.js?v=24"></script>
  <script src="js/authority/hazardSystem.js?v=24"></script>

  <!-- Phase C: Client rendering -->
  <script src="js/client/rendering/hitEffects.js?v=24"></script>
  <script src="js/client/rendering/entityRenderers.js?v=24"></script>

  <!-- Phase A.5: Core scene/level management (depends on Phase A data + eventBus) -->
  <script src="js/core/sceneManager.js?v=24"></script>
  <script src="js/core/tileRenderer.js?v=24"></script>

  <!-- Phase B: Authority systems (continued) -->
  <script src="js/authority/waveSystem.js?v=24"></script>
  <script src="js/authority/damageSystem.js?v=24"></script>
  <script src="js/authority/inventorySystem.js?v=24"></script>
  <script src="js/authority/mobSystem.js?v=24"></script>
  <script src="js/authority/stateReset.js?v=24"></script>
  <script src="js/authority/miningSystem.js?v=24"></script>
  <script src="js/authority/fishingSystem.js?v=24"></script>
  <script src="js/authority/farmingSystem.js?v=24"></script>
  <script src="js/authority/snapshots.js?v=24"></script>
  <script src="js/authority/commands.js?v=24"></script>
  <script src="js/authority/authorityTick.js?v=24"></script>

  <!-- Phase C: Client rendering (continued) -->
  <script src="js/client/rendering/characterSprite.js?v=24"></script>

  <!-- Phase D: Client UI -->
  <script src="js/client/input/inputIntent.js?v=24"></script>
  <script src="js/client/ui/panelManager.js?v=24"></script>
  <script src="js/client/ui/chatProfile.js?v=24"></script>
  <script src="js/client/ui/toolbox.js?v=24"></script>
  <script src="js/client/ui/settings.js?v=24"></script>
  <script src="js/client/ui/panels.js?v=24"></script>
  <script src="js/client/ui/customize.js?v=24"></script>
  <script src="js/client/ui/inventory.js?v=24"></script>
  <script src="js/client/ui/testMobPanel.js?v=24"></script>

  <!-- Phase E: Input + Core -->
  <script src="js/client/input/input.js?v=24"></script>
  <script src="js/core/gunSystem.js?v=24"></script>
  <script src="js/core/meleeSystem.js?v=24"></script>
  <script src="js/core/saveLoad.js?v=24"></script>
  <script src="js/core/interactable.js?v=24"></script>
  <script src="js/authority/cookingSystem.js?v=24"></script>
  <script src="js/authority/deliNPCSystem.js?v=24"></script>
  <script src="js/core/draw.js?v=24"></script>
  <script src="js/testing/testHarness.js?v=24"></script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <title>Graal-Style PvP Arena</title>
  <style>
    * { margin: 0; padding: 0; }
    body { background: #000; overflow: hidden; }
    canvas { display: block; image-rendering: pixelated; image-rendering: crisp-edges; }
  </style>
</head>
<body>
  <canvas id="game"></canvas>
  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d", { alpha: false });

    const BASE_W = 1920, BASE_H = 1080;
    let scale = 1;

    function resize() {
      scale = Math.min(window.innerWidth / BASE_W, window.innerHeight / BASE_H);
      const dpr = window.devicePixelRatio || 1;
      canvas.width = Math.round(BASE_W * dpr);
      canvas.height = Math.round(BASE_H * dpr);
      canvas.style.width = (BASE_W * scale) + "px";
      canvas.style.height = (BASE_H * scale) + "px";
      canvas.style.marginLeft = ((window.innerWidth - BASE_W * scale) / 2) + "px";
      canvas.style.marginTop = ((window.innerHeight - BASE_H * scale) / 2) + "px";
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      // Crisp pixel rendering
      ctx.imageSmoothingEnabled = false;
      ctx.textRendering = "geometricPrecision";
    }
    resize();
    window.addEventListener("resize", resize);
  </script>

  <!-- Phase A: Shared data -->
  <script src="js/shared/levelData.js"></script>
  <script src="js/shared/mobTypes.js"></script>
  <script src="js/shared/floorConfig.js"></script>
  <script src="js/shared/itemData.js"></script>
  <script src="js/shared/oreData.js"></script>
  <script src="js/shared/cookingData.js"></script>
  <script src="js/shared/fishingData.js"></script>
  <script src="js/shared/farmingData.js"></script>
  <script src="js/shared/armorVisuals.js"></script>

  <!-- Phase B: Authority systems -->
  <script src="js/authority/eventBus.js"></script>
  <script src="js/authority/gameState.js"></script>
  <script src="js/authority/combatSystem.js"></script>
  <script src="js/authority/attackShapes.js"></script>
  <script src="js/authority/telegraphSystem.js"></script>
  <script src="js/authority/hazardSystem.js"></script>

  <!-- Phase C: Client rendering -->
  <script src="js/client/rendering/hitEffects.js"></script>
  <script src="js/client/rendering/entityRenderers.js"></script>

  <!-- Phase A.5: Core scene/level management (depends on Phase A data + eventBus) -->
  <script src="js/core/sceneManager.js"></script>
  <script src="js/core/tileRenderer.js"></script>

  <!-- Phase B: Authority systems (continued) -->
  <script src="js/authority/waveSystem.js"></script>
  <script src="js/authority/damageSystem.js"></script>
  <script src="js/authority/inventorySystem.js"></script>
  <script src="js/authority/mobSystem.js"></script>
  <script src="js/authority/stateReset.js"></script>
  <script src="js/authority/miningSystem.js"></script>
  <script src="js/authority/fishingSystem.js"></script>
  <script src="js/authority/farmingSystem.js"></script>
  <script src="js/authority/snapshots.js"></script>
  <script src="js/authority/commands.js"></script>
  <script src="js/authority/authorityTick.js"></script>

  <!-- Phase C: Client rendering (continued) -->
  <script src="js/client/rendering/characterSprite.js"></script>

  <!-- Phase D: Client UI -->
  <script src="js/client/input/inputIntent.js"></script>
  <script src="js/client/ui/panelManager.js"></script>
  <script src="js/client/ui/chatProfile.js"></script>
  <script src="js/client/ui/toolbox.js"></script>
  <script src="js/client/ui/settings.js"></script>
  <script src="js/client/ui/panels.js"></script>
  <script src="js/client/ui/customize.js"></script>
  <script src="js/client/ui/inventory.js"></script>

  <!-- Phase E: Input + Core -->
  <script src="js/client/input/input.js"></script>
  <script src="js/core/gunSystem.js"></script>
  <script src="js/core/meleeSystem.js"></script>
  <script src="js/core/saveLoad.js"></script>
  <script src="js/core/interactable.js"></script>
  <script src="js/authority/cookingSystem.js"></script>
  <script src="js/authority/deliNPCSystem.js"></script>
  <script src="js/core/draw.js"></script>
  <script src="js/testing/testHarness.js"></script>
</body>
</html>
